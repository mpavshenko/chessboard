!function(e){function t(t){for(var n,a,s=t[0],c=t[1],l=t[2],h=0,u=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&u.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(d&&d(t);u.length;)u.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,s=1;s<i.length;s++){var c=i[s];0!==o[c]&&(n=!1)}n&&(r.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},o={2:0},r=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.e=function(e){var t=[],i=o[e];if(0!==i)if(i)t.push(i[2]);else{var n=new Promise((function(t,n){i=o[e]=[t,n]}));t.push(i[2]=n);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.src=function(e){return a.p+"js/"+({0:"alr",1:"h2c"}[e]||e)+"."+{0:"bfe738cbef6a77df44b4",1:"9a52cf81fb82715eb729"}[e]+".js"}(e);var c=new Error;r=function(t){s.onerror=s.onload=null,clearTimeout(l);var i=o[e];if(0!==i){if(i){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",c.name="ChunkLoadError",c.type=n,c.request=r,i[1](c)}o[e]=void 0}};var l=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;r.push([11,3]),i()}([function(e,t,i){"use strict";(function(e){function n(){const e=document.createElement("input"),t=window.location.href;document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)}i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return n}));var o=1;async function r(){const{default:e}=await i.e(1).then(i.t.bind(null,26,7)),t=await e(document.querySelector(".proxy"));document.body.appendChild(t);var n=document.createElement("a"),r=t.toDataURL("image/png");r=r.replace("image/png","image/octet-stream"),document.body.removeChild(t),n.download=`chess-board-${o++}.png`,n.href=r,n.click()}async function a(e){await i.e(0).then(i.t.bind(null,27,7));const{default:t}=await i.e(0).then(i.t.bind(null,28,7));e(t)}e.fn.click=function(e){this.on("click",t=>e(t))}}).call(this,i(1))},,,,,,function(e,t,i){"use strict";i.r(t),t.default={id:"ru",runGameMode:"Играть партию",runDemoMode:"Расставить позицию",whiteToPlay:"Ход белых",blackToPlay:"Ход черныx",copyUrlMsg:"Ссылка на позицию скопирована в буфер обмена",thxForSupportMsg:"Спасибо за поддержку!",settings:"Настройки",chessNotation:{p:"",n:"К",b:"C",k:"Кр",q:"Ф",r:"Л"}}},function(e,t,i){"use strict";(function(e,n){i(16);var o=i(5),r=i.n(o),a=(i(20),i(8)),s=i.n(a),c=i(9),l=i(10);const d=["a","b","c","d","e","f","g","h"],h=[1,2,3,4,5,6,7,8],u=["b","w"],p=["r","n","b","k","q","p"],m=new Audio("/img/click.mp3"),f={p:"chess-pawn",n:"chess-knight",k:"chess-king",q:"chess-queen",r:"chess-rook",b:"chess-bishop",1:"birthday-cake",2:"ice-cream",3:"bomb",4:"dragon"},v=t=>e("<div>").addClass(t);t.a=class{constructor(e,t,i){this.boardContainerSelector=e,this.customs={},this.arrows=[],this.chess=new r.a,this.paint=new c.a,this.chessTmp=new r.a,this.history=new l.a,this.classicView=!1,this.orientation=0,this.gameMode=!1,this.moveMarksMode=!0,this.load(i),this.save()}build(){const t=e(this.boardContainerSelector).empty().addClass("board-container"),i=v("proxy"),n=e("<canvas>").addClass("canvas"),o=this.buildChessBoard();i.append(n),i.append(o),t.append(i),t.append(this.buildPiecesBox()),t.append(this.buildNotesBox()),this.paint.onChanged=()=>this.save(),this.paint.onGetXY=e=>this.cellToXY(e),this.paint.init(n),this.setupDragula(),this.setupClicks()}buildChessBoard(){const t=v("chess-board"),i=this.buildGameField(),n=this.buildAlphabetLetterPanel(),o=this.buildNumericLetterPanel();return t.append(n),t.append(e("<div/>").css("display","flex").append(o).append(i).append(o.clone())),t.append(n.clone()),this.topTurnIndicator=v("top-turn-indicator").text("▲"),t.append(this.topTurnIndicator),this.bottomTurnIndicator=v("bottom-turn-indicator").text("▲"),t.append(this.bottomTurnIndicator),this.colorTurnIndicators(),t}buildGameField(){const t=v("game-field");var i=[...h];0==this.orientation&&i.reverse();var n=[...d];1==this.orientation&&n.reverse();for(const o of i){const i=e("<div>").css("display","flex");for(const e of n){const t=e+o,n=this.chess.square_color(t),r=v("cell "+n).attr("id",t);i.append(r)}t.append(i)}return t}buildNumericLetterPanel(){const e=v("numeric-letters-panel");var t=[...h];0==this.orientation&&(t=t.reverse());for(const n of t){var i=v("numeric-letter").text(n);e.append(i)}return e}buildAlphabetLetterPanel(){const e=v("alphabet-letters-panel");var t=[...d];1==this.orientation&&t.reverse();for(const i of t){const t=v("alphabet-letter").text(i.toUpperCase());e.append(t)}return e}buildNotesBox(){const t=v("notes-box"),i=e("<table>");for(let t=0;t<20;t++){const n=e("<tr>"),o=e("<td>").addClass("move-num").text(t+1),r=e("<td>").addClass("move").attr("id","turn-"+2*t),a=e("<td>").addClass("move").attr("id","turn-"+(2*t+1));n.append(o).append(r).append(a),i.append(n)}return this.gameMode||t.hide(),t.append(i)}cellToXY(t){const i=e(".cell").width(),n=e(".numeric-letter").width()+2,o=0==this.orientation?n+i*(8.5-parseInt(t[1])):n+i*(parseInt(t[1])-.5);return[0==this.orientation?n+i*(.5+d.indexOf(t[0])):n+i*(7.5-d.indexOf(t[0])),o]}updateNotes(){const t=this.chess.history({verbose:!0});e(".notes-box .move").text("");for(let i=0;i<t.length;i++)e("#turn-"+i).text(n.chessNotation[t[i].piece]+t[i].to)}buildPiecesBox(){const e=v("pieces-box");return this.fillPiecesBox(e),this.gameMode&&e.hide(),e}fillPiecesBox(e){const t=(e,t,i)=>{const n=v("cell box"),o=this.createPiece(e,t,i);return n.append(o),n};var i=1;for(const n of u){const o=v("pieces-box-row");p.forEach(e=>o.append(t(e,n,!1)));const r="w"==n?"b":"w";o.append(t(i++,r,!0)),o.append(t(i++,r,!0)),e.append(o)}}createPiece(e,t,i){const n=v("piece").attr("data-type",e).attr("data-color",t).attr("data-custom",i);if(this.classicView)n.css("background-image",`url(img/pieces/${e}${t}.svg)`);else{const o=this.createFa(e,t);n.append(o),n.addClass("p"==e||i?"smaller":"bigger")}return n}createFa(t,i){return e("<i>").addClass("fas").addClass("fa-"+f[t]).css("color","w"==i?"white":"black").css("text-shadow",("w"==i?"black":"white")+" 0 0 4px")}setupDragula(){var t=[];this.drake&&this.drake.destroy();const i=v("placeholder").addClass("selected-piece");this.drake=s()(e(".cell").get(),{revertOnSpill:!0,removeOnSpill:!this.gameMode,moves:(i,n,o,r)=>((this.moveMarksMode||this.gameMode)&&(t=this.getMoves(e(n).attr("id"))),this.moveMarksMode&&(this.hideMoves(),this.showMoves(t)),!this.gameMode||t.length>0),accepts:(i,n)=>!e(n).hasClass("box")&&((!this.gameMode||-1!=t.map(e=>e.to).indexOf(e(n).attr("id")))&&(setTimeout(()=>e(".gu-transit",n).prependTo(n)),!0)),copy:(t,i)=>e(i).hasClass("box")}),this.drake.on("drag",(t,n)=>{this.deselectPiece(),e(n).hasClass("box")||e(n).append(i)}),this.drake.on("cancel",(t,i,n)=>{this.hideMoves(),e(n).children(".placeholder").remove()}),this.drake.on("remove",(t,i,n)=>{if(this.gameMode)return;const o=e(n).attr("id");this.chess.remove(o),delete this.customs[o],e(n).children(".placeholder").remove(),this.hideMoves(),this.save()}),this.drake.on("drop",(t,i,n)=>{const o=e(i).attr("id"),r=e(n).attr("id"),a=e(t).data();this.movePiece(r,o,a),e(i).children().not(".gu-transit").remove(),e(n).children(".placeholder").remove(),this.hideMoves()})}invertTurn(e){const t=this.chess.turn();return(e=this.chess.fen().replace(` ${t} `,` ${"w"==t?"b":"w"} `)).slice(0,e.length-3)+("w"==t?"0 2":"0 1")}getMoves(e){const t=this.chess.get(e);if(!t)return[];if(this.chess.turn()!=t.color){if(this.gameMode)return[];return this.chessTmp.load(this.invertTurn()),this.chessTmp.moves({square:e,verbose:!0})}return this.chess.moves({square:e,verbose:!0})}showMoves(t){const i=v("mark");t.forEach(t=>e("#"+t.to).append(i.clone()))}hideMoves(){e(".mark").remove()}movePiece(e,t,{type:i,color:n,custom:o}){if(m.play(),this.gameMode){const i=this.getMoves(e);if(0==i.length)return void console.error("Moves not found from: "+e);const n=i.filter(e=>e.to==t);this.chess.move(n[0].san),this.updateNotes(),this.save(),this.chess.game_over()?alert("Game over"):this.showTurn()}else o?delete this.customs[e]:this.chess.remove(e),this.putPiece(t,{type:i,color:n,custom:o})}putPiece(e,{type:t,color:i,custom:n}){delete this.customs[e],n?(this.chess.remove(e),this.customs[e]={type:t,color:i}):this.chess.put({type:t,color:i},e),this.save()}save(){const e=this.chess.fen().replace(/\//g,"~").replace(/ /g,"_");const t=Object.entries(this.customs).map(([e,t])=>({id:e,...t})).filter(e=>e.type).map(e=>e.id+e.type+e.color).join(""),i=this.paint.serialize();this.saveFlag=!0;const n=e+"#"+t+"#"+i+"#"+this.orientation;this.history.add(n),this.fireOnChangeState()}back(){const e=this.history.back();e&&(this.load(e),this.fireOnChangeState())}forward(){const e=this.history.forward();e&&(this.load(e),this.fireOnChangeState())}fireOnChangeState(){this.onChangeState({state:this.history.state(),canGoForward:this.history.canGoForward(),canGoBack:this.history.canGoBack()})}onChangeState(e){}changeState(e){this.history.smartAdd(e)&&this.load(e)}load(e){console.log("load",e);const[t,i,n,o,r]=e.split("#");if(t){const e=t.replace(/~/g,"/").replace(/_/g," ");this.chess.load(e)}else this.chess.reset();this.customs=i?i.match(/.{1,4}/g).reduce((e,t)=>{const i=t.slice(0,2),n=t[2],o=t[3];return e[i]={type:n,color:o},e},{}):{};const a=o?parseInt(o):0,s=()=>{this.orientation=a,this.build(),this.putPieces(),this.paint.load(n)};this.orientation!=a&&this.history.lenght()>0?this.animateOrieantation(s):s(),this.onTurnChange&&this.onTurnChange(this.chess.turn())}deselectPiece(){this.selectedPiece&&(this.selectedPiece.removeClass("selected-piece"),this.selectedPiece=null,this.selectedCellId=null,e(".cell").css("cursor","default"),e(".piece").css("cursor","grab"))}setupClicks(){const t=this;e(".cell").on("click",(function(i){i.stopPropagation();const n=e(this);t.click(n)}))}click(e){const t=e.children(".piece"),i=e.attr("id");this.gameMode?this.gameModeClick(e,t):i?this.gameFieldClick(e,t):this.piecesBoxClick(i,t)}gameModeClick(t,i){const n=t.attr("id"),o=this.getMoves(n);if(this.selectedPiece&&!o.length){this.getMoves(this.selectedCellId).filter(e=>e.to==n).length&&(t.empty(),this.selectedPiece.detach().prependTo(t),this.movePiece(this.selectedCellId,n,this.selectedPiece.data())),this.deselectPiece(),this.hideMoves()}else i.length&&o.length&&(this.selectedCellId!==n?(this.deselectPiece(),this.hideMoves(),this.selectedCellId=n,this.selectedPiece=i,e(".cell").css("cursor","pointer"),e(".piece").css("cursor","pointer"),this.selectedPiece.addClass("selected-piece"),this.showMoves(o)):(this.deselectPiece(),this.hideMoves()))}piecesBoxClick(t,i){(this.selectedPiece&&this.selectedPiece.data().type+this.selectedPiece.data().color)!=i.data().type+i.data().color?(this.deselectPiece(),this.selectedCellId=t,this.selectedPiece=i,e(".cell").css("cursor","pointer"),e(".piece").css("cursor","pointer"),this.selectedPiece.addClass("selected-piece")):this.deselectPiece()}gameFieldClick(t,i){const n=t.attr("id");this.selectedPiece?this.selectedCellId!==n?(t.empty(),this.selectedCellId?(this.selectedPiece.detach().prependTo(t),this.movePiece(this.selectedCellId,n,this.selectedPiece.data()),this.deselectPiece(),this.moveMarksMode&&this.hideMoves()):(this.selectedPiece.clone().removeClass("selected-piece").prependTo(t),this.putPiece(n,this.selectedPiece.data()),m.play())):(this.deselectPiece(),this.moveMarksMode&&this.hideMoves()):i.length&&(this.moveMarksMode&&(this.hideMoves(),this.showMoves(this.getMoves(n))),this.selectedCellId=n,this.selectedPiece=i,e(".cell").css("cursor","pointer"),e(".piece").css("cursor","pointer"),this.selectedPiece.addClass("selected-piece"))}putPieces(){e(".game-field .cell").empty();const t=({id:t,type:i,color:n,custom:o})=>{const r=e("#"+t),a=this.createPiece(i,n,o);r.append(a)};this.chess.SQUARES.map(e=>({id:e,...this.chess.get(e),custom:!1})).filter(e=>e.type).forEach(t),Object.entries(this.customs).map(([e,t])=>({id:e,...t,custom:!0})).forEach(t)}setInitialPosition(){this.chess.reset(),this.customs={},this.arrows=[],this.putPieces(),this.save(),this.showTurn()}clearPaint(){this.paint.clear(),this.save()}setClassicView(e){this.classicView=e,this.build(),this.putPieces()}setMoveMarksMode(e){this.moveMarksMode=e,this.hideMoves()}clear(){this.chess.clear(),this.paint.clear(),this.save(),this.putPieces()}animateOrieantation(t){e(".proxy").css("transition","transform 0.3s").css("transform","rotate(180deg)"),setTimeout(()=>{e(".proxy").css("transition","").css("transform",""),e(".chess-board .cell").empty(),t()},200)}flip(){this.orientation=(this.orientation+1)%2,this.animateOrieantation(()=>{this.build(),this.putPieces(),this.save(),this.deselectPiece(),this.hideMoves()})}showTurn(){this.colorTurnIndicators(),this.onTurnChange&&this.onTurnChange(this.chess.turn())}toggleTurn(){this.chess.load(this.invertTurn()),this.save(),this.showTurn()}colorTurnIndicators(){const e=1==this.orientation&&"w"==this.chess.turn()||0==this.orientation&&"b"==this.chess.turn();this.topTurnIndicator.css("color",0==this.orientation?"black":"white").css("visibility",e?"visible":"hidden"),this.bottomTurnIndicator.css("color",0==this.orientation?"white":"black").css("visibility",e?"hidden":"visible")}turn(){return this.chess.turn()}}}).call(this,i(1),i(6).default)},function(e,t,i){(function(t,i,n){e.exports=function e(t,i,n){function o(a,s){if(!i[a]){if(!t[a]){if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[a]={exports:{}};t[a][0].call(l.exports,(function(e){var i=t[a][1][e];return o(i||e)}),l,l.exports,e,t,i,n)}return i[a].exports}for(var r=!1,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,i){"use strict";var n={};function o(e){var t=n[e];return t?t.lastIndex=0:n[e]=t=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),t}t.exports={add:function(e,t){var i=e.className;i.length?o(t).test(i)||(e.className+=" "+t):e.className=t},rm:function(e,t){e.className=e.className.replace(o(t)," ").trim()}}},{}],2:[function(e,n,o){(function(t){"use strict";var o=e("contra/emitter"),r=e("crossvent"),a=e("./classes"),s=document,c=s.documentElement;function l(e,i,n,o){t.navigator.pointerEnabled?r[i](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[n],o):t.navigator.msPointerEnabled?r[i](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[n],o):(r[i](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[n],o),r[i](e,n,o))}function d(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function h(e){var t=e.getBoundingClientRect();return{left:t.left+u("scrollLeft","pageXOffset"),top:t.top+u("scrollTop","pageYOffset")}}function u(e,i){return void 0!==t[i]?t[i]:c.clientHeight?c[e]:s.body[e]}function p(e,t,i){var n,o=e||{},r=o.className;return o.className+=" gu-hide",n=s.elementFromPoint(t,i),o.className=r,n}function m(){return!1}function f(){return!0}function v(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function b(e){return e.parentNode===s?null:e.parentNode}function x(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){return!!t&&"false"!==t.contentEditable&&("true"===t.contentEditable||e(b(t)))}(e)}function w(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function y(e,t){var i=function(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in i)&&n[e]in i&&(e=n[e]),i[e]}n.exports=function(e,t){var n,u,k,C,M,P,T,S,z,O,E,I=arguments.length;1===I&&!1===Array.isArray(e)&&(t=e,e=[]);var D,j=null,B=t||{};void 0===B.moves&&(B.moves=f),void 0===B.accepts&&(B.accepts=f),void 0===B.invalid&&(B.invalid=J),void 0===B.containers&&(B.containers=e||[]),void 0===B.isContainer&&(B.isContainer=m),void 0===B.copy&&(B.copy=!1),void 0===B.copySortSource&&(B.copySortSource=!1),void 0===B.revertOnSpill&&(B.revertOnSpill=!1),void 0===B.removeOnSpill&&(B.removeOnSpill=!1),void 0===B.direction&&(B.direction="vertical"),void 0===B.ignoreInputTextSelection&&(B.ignoreInputTextSelection=!0),void 0===B.mirrorContainer&&(B.mirrorContainer=s.body);var N=o({containers:B.containers,start:V,end:K,cancel:ee,remove:Z,destroy:F,canMove:U,dragging:!1});return!0===B.removeOnSpill&&N.on("over",re).on("out",ae),_(),N;function A(e){return-1!==N.containers.indexOf(e)||B.isContainer(e)}function _(e){var t=e?"remove":"add";l(c,t,"mousedown",Y),l(c,t,"mouseup",H)}function G(e){l(c,e?"remove":"add","mousemove",L)}function X(e){var t=e?"remove":"add";r[t](c,"selectstart",q),r[t](c,"click",q)}function F(){_(!0),H({})}function q(e){D&&e.preventDefault()}function Y(e){if(P=e.clientX,T=e.clientY,1===d(e)&&!e.metaKey&&!e.ctrlKey){var t=e.target,i=R(t);i&&(D=i,G(),"mousedown"===e.type&&(x(t)?t.focus():e.preventDefault()))}}function L(e){if(D)if(0!==d(e)){if(void 0===e.clientX||e.clientX!==P||void 0===e.clientY||e.clientY!==T){if(B.ignoreInputTextSelection){var t=y("clientX",e),i=y("clientY",e);if(x(s.elementFromPoint(t,i)))return}var n=D;G(!0),X(),K(),$(n);var o=h(k);C=y("pageX",e)-o.left,M=y("pageY",e)-o.top,a.add(O||k,"gu-transit"),se(),oe(e)}}else H({})}function R(e){if(!(N.dragging&&n||A(e))){for(var t=e;b(e)&&!1===A(b(e));){if(B.invalid(e,t))return;if(!(e=b(e)))return}var i=b(e);if(i&&!B.invalid(e,t)&&B.moves(e,i,t,w(e)))return{item:e,source:i}}}function U(e){return!!R(e)}function V(e){var t=R(e);t&&$(t)}function $(e){he(e.item,e.source)&&(O=e.item.cloneNode(!0),N.emit("cloned",O,e.item,"copy")),u=e.source,k=e.item,S=z=w(e.item),N.dragging=!0,N.emit("drag",k,u)}function J(){return!1}function K(){if(N.dragging){var e=O||k;Q(e,b(e))}}function W(){D=!1,G(!0),X(!0)}function H(e){if(W(),N.dragging){var t=O||k,i=y("clientX",e),o=y("clientY",e),r=ne(p(n,i,o),i,o);r&&(O&&B.copySortSource||!O||r!==u)?Q(t,r):B.removeOnSpill?Z():ee()}}function Q(e,t){var i=b(e);O&&B.copySortSource&&t===u&&i.removeChild(k),ie(t)?N.emit("cancel",e,u,u):N.emit("drop",e,t,u,z),te()}function Z(){if(N.dragging){var e=O||k,t=b(e);t&&t.removeChild(e),N.emit(O?"cancel":"remove",e,t,u),te()}}function ee(e){if(N.dragging){var t=arguments.length>0?e:B.revertOnSpill,i=O||k,n=b(i),o=ie(n);!1===o&&t&&(O?n&&n.removeChild(O):u.insertBefore(i,S)),o||t?N.emit("cancel",i,u,u):N.emit("drop",i,n,u,z),te()}}function te(){var e=O||k;W(),ce(),e&&a.rm(e,"gu-transit"),E&&clearTimeout(E),N.dragging=!1,j&&N.emit("out",e,j,u),N.emit("dragend",e),u=k=O=S=z=E=j=null}function ie(e,t){var i;return i=void 0!==t?t:n?z:w(O||k),e===u&&i===S}function ne(e,t,i){for(var n=e;n&&!o();)n=b(n);return n;function o(){if(!1===A(n))return!1;var o=le(n,e),r=de(n,o,t,i);return!!ie(n,r)||B.accepts(k,n,u,r)}}function oe(e){if(n){e.preventDefault();var t=y("clientX",e),o=y("clientY",e),r=t-C,a=o-M;n.style.left=r+"px",n.style.top=a+"px";var s=O||k,c=p(n,t,o),l=ne(c,t,o),d=null!==l&&l!==j;(d||null===l)&&(j&&v("out"),j=l,d&&v("over"));var h=b(s);if(l!==u||!O||B.copySortSource){var m,f=le(l,c);if(null!==f)m=de(l,f,t,o);else{if(!0!==B.revertOnSpill||O)return void(O&&h&&h.removeChild(s));m=S,l=u}(null===m&&d||m!==s&&m!==w(s))&&(z=m,i(l).prepend(s),N.emit("shadow",s,l,u))}else h&&h.removeChild(s)}function v(e){N.emit(e,s,j,u)}}function re(e){a.rm(e,"gu-hide")}function ae(e){N.dragging&&a.add(e,"gu-hide")}function se(){if(!n){var e=k.getBoundingClientRect();(n=k.cloneNode(!0)).style.width=v(e)+"px",n.style.height=g(e)+"px",a.rm(n,"gu-transit"),a.add(n,"gu-mirror"),B.mirrorContainer.appendChild(n),l(c,"add","mousemove",oe),a.add(B.mirrorContainer,"gu-unselectable"),N.emit("cloned",n,k,"mirror")}}function ce(){n&&(a.rm(B.mirrorContainer,"gu-unselectable"),l(c,"remove","mousemove",oe),b(n).removeChild(n),n=null)}function le(e,t){for(var i=t;i!==e&&b(i)!==e;)i=b(i);return i===c?null:i}function de(e,t,i,n){var o,r="horizontal"===B.direction;return t!==e?(o=t.getBoundingClientRect(),a(r?i>o.left+v(o)/2:n>o.top+g(o)/2)):function(){var t,o,a,s=e.children.length;for(t=0;t<s;t++){if(o=e.children[t],a=o.getBoundingClientRect(),r&&a.left+a.width/2>i)return o;if(!r&&a.top+a.height/2>n)return o}return null}();function a(e){return e?w(t):t}}function he(e,t){return"boolean"==typeof B.copy?B.copy:B.copy(e,t)}}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":5,crossvent:6}],3:[function(e,t,i){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],4:[function(e,t,i){"use strict";var n=e("ticky");t.exports=function(e,t,i){e&&n((function(){e.apply(i||null,t||[])}))}},{ticky:9}],5:[function(e,t,i){"use strict";var n=e("atoa"),o=e("./debounce");t.exports=function(e,t){var i=t||{},r={};return void 0===e&&(e={}),e.on=function(t,i){return r[t]?r[t].push(i):r[t]=[i],e},e.once=function(t,i){return i._once=!0,e.on(t,i),e},e.off=function(t,i){var n=arguments.length;if(1===n)delete r[t];else if(0===n)r={};else{var o=r[t];if(!o)return e;o.splice(o.indexOf(i),1)}return e},e.emit=function(){var t=n(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var a=(r[t]||[]).slice(0);return function(){var r=n(arguments),s=this||e;if("error"===t&&!1!==i.throws&&!a.length)throw 1===r.length?r[0]:r;return a.forEach((function(n){i.async?o(n,r,s):n.apply(s,r),n._once&&e.off(t,n)})),e}},e}},{"./debounce":4,atoa:3}],6:[function(e,i,n){(function(t){"use strict";var n=e("custom-event"),o=e("./eventmap"),r=t.document,a=function(e,t,i,n){return e.addEventListener(t,i,n)},s=function(e,t,i,n){return e.removeEventListener(t,i,n)},c=[];function l(e,t,i){var n=function(e,t,i){var n,o;for(n=0;n<c.length;n++)if((o=c[n]).element===e&&o.type===t&&o.fn===i)return n}(e,t,i);if(n){var o=c[n].wrapper;return c.splice(n,1),o}}t.addEventListener||(a=function(e,i,n){return e.attachEvent("on"+i,function(e,i,n){var o=l(e,i,n)||function(e,i,n){return function(i){var o=i||t.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,n.call(e,o)}}(e,0,n);return c.push({wrapper:o,element:e,type:i,fn:n}),o}(e,i,n))},s=function(e,t,i){var n=l(e,t,i);if(n)return e.detachEvent("on"+t,n)}),i.exports={add:a,remove:s,fabricate:function(e,t,i){var a=-1===o.indexOf(t)?new n(t,{detail:i}):function(){var e;return r.createEvent?(e=r.createEvent("Event")).initEvent(t,!0,!0):r.createEventObject&&(e=r.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(e,i,n){(function(e){"use strict";var t=[],n="",o=/^on/;for(n in e)o.test(n)&&t.push(n.slice(2));i.exports=t}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,i,n){(function(e){var t=e.CustomEvent;i.exports=function(){try{var e=new t("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?t:"function"==typeof document.createEvent?function(e,t){var i=document.createEvent("CustomEvent");return t?i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):i.initCustomEvent(e,!1,!1,void 0),i}:function(e,t){var i=document.createEventObject();return i.type=e,t?(i.bubbles=Boolean(t.bubbles),i.cancelable=Boolean(t.cancelable),i.detail=t.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,i){var o;o="function"==typeof n?function(e){n(e)}:function(e){setTimeout(e,0)},t.exports=o},{}]},{},[2])(2)}).call(this,i(4),i(1),i(22).setImmediate)},function(e,t,i){"use strict";(function(e){i(25);t.a=class{constructor(){this.arrows={},this.markers=new Set}init(e){this.canvas=e,this.ctx=e.get(0).getContext("2d"),this.events(),this.resize(),window.onresize=()=>this.resize()}onChanged(){}onGetXY(){}resize(){this.updateSize(),this.redraw()}updateSize(){this.ctx.canvas.width=this.canvas.width(),this.ctx.canvas.height=this.canvas.height(),this.size=this.canvas.width(),this.ctx.globalAlpha=.7,this.ctx.fillStyle="#f19953",this.ctx.strokeStyle="#f19953"}events(){const t=(t,i)=>e(".cell").on(t,(function(t){3==t.which&&(t.preventDefault(),i(e(this)))}));let i,n;e(".game-field .cell").on("contextmenu",()=>!1),t("mousedown",e=>{n=e.attr("id")}),t("mouseup",()=>{n!=i&&i?this.arrowAcrion(n,i):this.markerAction(n),this.onChanged(),i=null,n=null}),t("mousemove",e=>{const t=e.attr("id");t!=i&&(i=t,n!=t&&(this.redraw(),this.drawArrow(n,t)))})}arrowAcrion(e,t){const i=e+t;this.arrows[i]?(delete this.arrows[i],this.redraw()):this.arrows[i]={from:e,to:t}}markerAction(e){this.markers.has(e)?(this.markers.delete(e),this.redraw()):(this.markers.add(e),this.drawMarker(e))}redraw(){this.erase(),Object.values(this.arrows).forEach(e=>this.drawArrow(e.from,e.to)),this.markers.forEach(e=>this.drawMarker(e))}erase(){this.ctx&&this.ctx.clearRect(0,0,this.size,this.size)}drawArrow(e,t){var[i,n]=this.onGetXY(e),[o,r]=this.onGetXY(t);const a=Math.sqrt((i-o)**2+(n-r)**2),s=this.size/40,c=Math.abs(s*(i-o)/a),l=Math.abs(s*(n-r)/a);i>o?(i-=1.7*c,o+=c):(i+=1.7*c,o-=c),n>r?(n-=1.7*l,r+=l):(n+=1.7*l,r-=l),this.ctx.beginPath(),this.ctx.lineWidth=this.size/350;const d=this.size/100;this.ctx.arrow(i,n,o,r,[0,d,3*-d,d,3*-d,3*d]),this.ctx.fill()}drawMarker(e){const[t,i]=this.onGetXY(e),n=this.size/10;this.ctx.roundRect(t-n/2,i-n/2,n,n,.35*n),this.ctx.lineWidth=this.size/80,this.ctx.stroke()}serialize(){return Object.values(this.arrows).map(e=>e.from+e.to).join("")+"_"+[...this.markers].join("")}load(e){if(!e)return;const[t,i]=e.split("_");this.arrows=t?t.match(/.{1,4}/g).reduce((e,t)=>{const[i,n]=t.match(/.{1,2}/g);return e[t]={from:i,to:n},e},{}):{},this.markers=new Set(i?i.match(/.{1,2}/g):[]),this.redraw()}clear(){this.arrows={},this.markers.clear(),this.erase()}}}).call(this,i(1))},function(e,t,i){"use strict";t.a=class{constructor(){this.history=[],this.index=-1}clear(){this.history=[]}lenght(){return this.history.length}state(){return this.history[this.index]}add(e){this.history.splice(++this.index,this.history.length,e)}canGoForward(){return this.index<this.history.length-1}forward(){return this.canGoForward()?this.history[++this.index]:null}canGoBack(){return this.index>0}back(){return this.canGoBack()?this.history[--this.index]:null}smartAdd(e){return e!=this.history[this.index]&&(this.canGoBack()&&this.history[this.index-1]==e?(this.index--,!0):this.canGoForward()&&this.history[this.index+1]==e?(this.index++,!0):(this.add(e),!0))}log(){console.log("index:",this.index,"history:",this.history)}}},function(e,t,i){"use strict";i.r(t),function(e,t){i(12),i(14);var n=i(7),o=i(0);const r="ru"==e.id?' <iframe \n        src="https://money.yandex.ru/quickpay/shop-widget?writer=seller&targets=%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0&targets-hint=&default-sum=300&button-text=13&payment-type-choice=on&mobile-payment-type-choice=on&hint=&successURL=&quickpay=shop&account=410015717303956" \n        width="100%" \n        height="300" \n        frameborder="0" \n        allowtransparency="true" \n        scrolling="no">\n      </iframe>':"";t(document).ready((function(){const i="true"==localStorage.getItem("show-move-marks"),a="true"==localStorage.getItem("classic-view"),s=new n.a("#board-container",!1,window.location.hash.slice(1));s.setMoveMarksMode(i),s.setClassicView(a);const c=t("#draw-arrows"),l=t("#toggle-turn"),d=t("#clear-board"),h=t("#remove-arrows"),u=t("#mode-btn"),p=t("#back-btn").prop("disabled",!0),m=t("#forward-btn").prop("disabled",!0),f=t(".show-move-marks").prop("checked",i),v=t(".classic-view").prop("checked",a),g=e=>{localStorage.setItem("show-move-marks",e.target.checked),s.setMoveMarksMode(e.target.checked),f.prop("checked",e.target.checked)},b=e=>{localStorage.setItem("classic-view",e.target.checked),s.setClassicView(e.target.checked),v.prop("checked",e.target.checked)};f.on("change",g),v.on("change",b);let x=!1;function w(){l.prop("disabled",s.gameMode),d.prop("disabled",s.gameMode),h.prop("disabled",s.gameMode),c.prop("disabled",s.gameMode)}window.onhashchange=()=>{x?x=!1:s.changeState(window.location.hash.slice(1))},s.onChangeState=e=>{x=!0,console.log(e),window.location.hash=e.state,p.prop("disabled",!e.canGoBack),m.prop("disabled",!e.canGoForward)},s.onCancelDrawMode=()=>c.removeClass("select"),s.onSetDrawMode=()=>c.addClass("select"),s.onTurnChange=t=>{"w"==t?(l.removeClass("black-turn"),l.children("div").text(e.whiteToPlay)):(l.addClass("black-turn"),l.children("div").text(e.blackToPlay))},s.onTurnChange(s.turn()),w(),u.click(()=>{s.gameMode?(s.runDemoMode(),u.text(e.runGameMode)):(s.runGameMode(),u.text(e.runDemoMode)),w()}),t("#copy-url").click(()=>{Object(o.b)(),Object(o.a)(t=>t.message(e.copyUrlMsg))}),t("#download-image").click(()=>Object(o.c)()),p.click(()=>s.back()),m.click(()=>s.forward()),t("#flip-board").click(()=>s.flip()),t("#initial-position").click(()=>s.setInitialPosition()),d.click(()=>s.clear()),t("#settings").click(()=>{Object(o.a)(i=>{i.alert(e.settings,t("#settings-panel").html());const n="true"==localStorage.getItem("show-move-marks"),o="true"==localStorage.getItem("classic-view");t(".ajs-dialog .show-move-marks").prop("checked",n).on("change",g),t(".ajs-dialog .classic-view").prop("checked",o).on("change",b)})}),c.click(()=>s.toggleDrawMode()),l.click(()=>s.toggleTurn()),h.click(()=>s.clearPaint()),t("#donate").click(t=>{t.preventDefault(),Object(o.a)(t=>t.alert(e.thxForSupportMsg,r))}),t(".se-pre-con").css("transition","opacity 0.3s").css({opacity:0,display:"none"})}))}.call(this,i(6).default,i(1))},function(e,t,i){var n=i(2),o=i(13);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1},a=(n(o,r),o.locals?o.locals:{});e.exports=a},function(e,t,i){(t=i(3)(!1)).push([e.i,'body{margin:0;padding:0;height:100%;overflow:hidden;font-family:"Segoe UI", "Source Sans Pro", Calibri, Candara, Arial, sans-serif}.light-link{color:#dbdbdd;background-color:transparent;text-decoration:none}.light-link:hover{color:white}.hidden{visibility:hidden}.navbar{width:100%;height:70px;background-color:#2b2d42;box-shadow:0px 1px 10px 1px gray;display:flex;align-items:center;justify-content:space-between;color:#dbdbdd}@media all and (orientation: portrait), (max-height: 800px) and (orientation: landscape){.navbar{height:35px}}.navbar .navbar-left{display:flex;align-items:center}.navbar h1{display:flex;align-items:center;margin-left:calc(10vmin * 0.2);font-size:1.4em;font-weight:400}@media all and (orientation: portrait), (max-height: 800px) and (orientation: landscape){.navbar h1{font-size:1em}}.navbar h1 a{display:flex;align-items:center;font-size:inherit;margin-right:10px}.navbar h1 i{font-size:1.7em;width:10vmin;text-align:center}@media all and (orientation: portrait), (max-height: 800px) and (orientation: landscape){.navbar h1 i{display:none}}.navbar h1 #big-header{margin-left:calc(10vmin * 0.2)}@media all and (orientation: portrait){.navbar h1 #big-header{display:none}}.navbar h1 #small-header{margin-left:calc(10vmin * 0.2)}@media all and (orientation: landscape){.navbar h1 #small-header{display:none}}.navbar #back-btn,.navbar #mode-btn{margin-left:30px}@media all and (orientation: portrait), (max-height: 800px) and (orientation: landscape){.navbar #back-btn,.navbar #mode-btn{margin-left:5px}}.navbar .nav-btn{outline:none;color:white;background-color:#62929e;border:none;text-decoration:none;text-align:center;font-size:1.3em;border-radius:7px;margin-left:10px;padding:7px 20px 7px 20px}@media all and (orientation: portrait), (max-height: 800px) and (orientation: landscape){.navbar .nav-btn{padding:3px 10px 3px 10px;font-size:0.8em}}.navbar .nav-btn:hover{transition:all 0.5s;background-color:#527b85}.navbar .nav-btn:active{transition:all 0.2s;background-color:#3b585f}.navbar .nav-btn:disabled{background-color:#3b585f}.navbar .social{display:flex;align-items:center;margin-right:calc(10vmin * 0.2);margin-left:calc(10vmin * 0.2)}.navbar .social a{margin-right:10px}.navbar .social a i{font-size:2em}@media all and (orientation: portrait), (max-height: 800px) and (orientation: landscape){.navbar .social a i{font-size:1em}}.navbar .social #donate{border:solid 1px;border-radius:7px;margin-right:30px;padding:7px 20px 7px 20px;align-items:center;justify-content:center;display:flex}@media all and (orientation: portrait), (max-height: 800px) and (orientation: landscape){.navbar .social #donate{display:none;border:none;margin-right:0;padding:7px 10px 7px 0}}.navbar .social #donate span{font-size:1em;margin-left:10px}@media all and (orientation: portrait), (max-height: 800px) and (orientation: landscape){.navbar .social #donate span{font-size:0.7em}}.content{display:flex}.content #board-container{margin-top:calc(10vmin * 0.2)}@media all and (orientation: portrait){.content{flex-direction:column;align-items:center}}.toolbar{display:flex;justify-content:space-between}.toolbar .black-turn{color:#2b2d42;text-shadow:white 0 0 20px}@media all and (orientation: landscape){.toolbar{flex-direction:column;padding-top:calc(10vmin * 0.2)}.toolbar .btn{margin-right:calc(10vmin * 0.2);margin-left:calc(10vmin * 0.2)}}@media all and (orientation: portrait){.toolbar{width:calc(10vmin * 8.8);padding-top:calc(10vmin * 0.2)}}.btn{border-radius:1vmin;width:10vmin;height:10vmin;outline:none;color:white;background-color:#62929e;border:none;text-decoration:none;text-align:center}.btn i{font-size:calc(10vmin * 0.3)}@media (max-height: 800px), (orientation: portrait){.btn i{font-size:calc(10vmin * 0.4)}}.btn div{margin-top:10px;font-size:calc(10vmin * 0.13)}@media (max-height: 800px), (orientation: portrait){.btn div{display:none}}.btn:hover{transition:all 0.5s;background-color:#4e757f}.btn:active{transition:all 0.5s;background-color:#141e20}.select{background-color:#3b585f}.black-turn i{color:black;text-shadow:white 0 0 20px}.ajs-message{background-color:#657188;color:white}.ajs-button{outline:none;color:white;background-color:#657188;border:none;text-decoration:none;text-align:center}.ajs-button:hover{transition:all 0.5s;background-color:#545e71}.ajs-button:active{transition:all 0.5s;transition:background-color 0s;box-shadow:0 0 2px 2px #657188}#settings-panel{margin:calc(10vmin * 0.2);padding-left:calc(10vmin * 0.2)}@media all and (orientation: portrait), (max-height: 800px) and (orientation: landscape){#settings-panel{display:none}}.info{margin-top:calc(calc(10vmin * 0.2) * 2);display:flex;align-items:center;color:#657188}.info i{font-size:2em;color:#657188}.info span{font-size:1em;font-weight:500;color:#657188;margin-left:calc(10vmin * 0.2)}#version{margin-top:calc(10vmin * 0.2);font-size:1em;font-weight:500;color:#657188}.switch-container{display:flex;align-items:center;margin-top:calc(10vmin * 0.2)}.switch-container .switch-label{margin-left:calc(10vmin * 0.2);font-size:1.2em;font-weight:500;color:#657188}\n',""]),e.exports=t},function(e,t,i){var n=i(2),o=i(15);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1},a=(n(o,r),o.locals?o.locals:{});e.exports=a},function(e,t,i){(t=i(3)(!1)).push([e.i,'.switch{position:relative;display:inline-block;width:60px;height:34px}.switch input{opacity:0;width:0;height:0}.switch .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:0.4s;transition:0.4s;border-radius:34px}.switch .slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:white;-webkit-transition:0.4s;transition:0.4s;border-radius:50%}.switch input:checked+.slider{background-color:#62929e}.switch input:focus+.slider{box-shadow:0 0 1px #62929e}.switch input:checked+.slider:before{-webkit-transform:translateX(26px);-ms-transform:translateX(26px);transform:translateX(26px)}\n',""]),e.exports=t},function(e,t,i){var n=i(2),o=i(17);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1},a=(n(o,r),o.locals?o.locals:{});e.exports=a},function(e,t,i){var n=i(3),o=i(18),r=i(19);t=n(!1);var a=o(r);t.push([e.i,"@font-face{font-family:note-font;src:url("+a+")}.canvas{width:calc(10vmin * 8 + calc(10vmin * 0.4) * 2 + 4px);height:calc(10vmin * 8 + calc(10vmin * 0.4) * 2 + 4px);position:absolute;pointer-events:none;z-index:900}.board-container{display:flex;align-items:flex-start}@media all and (orientation: portrait){.board-container{flex-direction:column;align-items:center}}.proxy{position:relative}.top-turn-indicator{font-size:3.5vmin;position:absolute;right:0.2vmin;top:0.2vmin}.bottom-turn-indicator{font-size:3.5vmin;position:absolute;right:0.2vmin;bottom:0.3vmin}.chess-board{background-color:#808ba0;font-size:2vmin;display:flex column}.chess-board .selected-piece{box-sizing:border-box;border:calc(10vmin * 0.08) solid #17b890;border-radius:calc(10vmin * 0.35)}.chess-board .game-field{float:left;border:2px solid #dbdbdd}.chess-board .game-field .mark{position:absolute;z-index:1000;width:calc(10vmin * 0.5);height:calc(10vmin * 0.5);left:calc(10vmin * 0.25);top:calc(10vmin * 0.25);background-color:#17b890;opacity:0.5;border-radius:calc(10vmin * 0.5);pointer-events:none}.chess-board .game-field .cell{box-sizing:border-box;position:relative;width:10vmin;height:10vmin}.chess-board .game-field .light{background:#dbdbdd}.chess-board .game-field .light:hover{transition:all 0.5s;background-color:#b4b4b8}.chess-board .game-field .dark{background:#808ba0}.chess-board .game-field .dark:hover{transition:all 0.1s;background-color:#5a6579}.chess-board .numeric-letters-panel .numeric-letter{text-align:center;color:#dbdbdd;line-height:10vmin;height:10vmin;width:calc(10vmin * 0.4)}.chess-board .alphabet-letters-panel{display:flex;justify-content:center;align-items:center;height:calc(10vmin * 0.4)}.chess-board .alphabet-letters-panel .alphabet-letter{text-align:center;vertical-align:middle;color:#dbdbdd;width:10vmin}.cursor-pointer{cursor:pointer}.smaller{font-size:calc(10vmin * 0.65)}.smaller:hover{font-size:calc(10vmin * 0.75)}.bigger{font-size:calc(10vmin * 0.7)}.bigger:hover{font-size:calc(10vmin * 0.8)}.placeholder{position:absolute;width:10vmin;height:10vmin;left:0;top:0}.piece{z-index:999;display:flex;align-items:center;justify-content:center;width:10vmin;height:10vmin;cursor:grab;cursor:-webkit-grab;cursor:-moz-grab;background-repeat:no-repeat;background-position:center center;background-size:95%}.piece:hover{background-size:110%}.notes-box{padding:calc(10vmin * 0.4);border:2px solid #808ba0;height:calc(10vmin * 8);width:calc(10vmin * 2);background-color:#f5f5f6}@media all and (orientation: portrait){.notes-box{display:none}}.notes-box .move-num{width:calc(10vmin * 0.5);font-size:1.8vmin}.notes-box table,.notes-box th,.notes-box td{box-sizing:border-box;border:1px solid black;padding:0}.notes-box table{border-collapse:collapse;border-spacing:0}.notes-box .move{font-family:note-font;font-size:3vmin;width:calc(10vmin * 0.75)}.notes-box td{vertical-align:middle;text-align:center;color:#242830}.notes-box tr{height:calc(10vmin * 0.4)}.pieces-box{padding:calc(10vmin * 0.4);border:2px solid #808ba0;background-color:#f5f5f6;display:flex;flex-direction:row}@media all and (orientation: portrait){.pieces-box{flex-direction:column}}.pieces-box .pieces-box-row{display:flex}@media all and (orientation: landscape){.pieces-box .pieces-box-row{flex-direction:column}}.pieces-box .selected-piece{box-sizing:border-box;background-size:110%;border:calc(10vmin * 0.08) solid #17b890;border-radius:calc(10vmin * 0.35)}.gu-mirror{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}.cell div:nth-child(2).piece{display:none}.light .selected-piece{background-size:110%}.dark .selected-piece{background-size:110%}\n",""]),e.exports=t},,function(e,t,i){"use strict";i.r(t),t.default=i.p+"23fd27eac81bb298bc8d225ac7f31c4d.ttf"},function(e,t,i){var n=i(2),o=i(21);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1},a=(n(o,r),o.locals?o.locals:{});e.exports=a},function(e,t,i){(t=i(3)(!1)).push([e.i,'.gu-mirror {\n  position: fixed !important;\n  margin: 0 !important;\n  z-index: 9999 !important;\n  opacity: 0.8;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";\n  filter: alpha(opacity=80);\n}\n.gu-hide {\n  display: none !important;\n}\n.gu-unselectable {\n  -webkit-user-select: none !important;\n  -moz-user-select: none !important;\n  -ms-user-select: none !important;\n  user-select: none !important;\n}\n.gu-transit {\n  opacity: 0.2;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";\n  filter: alpha(opacity=20);\n}\n',""]),e.exports=t},,,,function(e,t){var i;(i=CanvasRenderingContext2D)&&i.prototype&&(i.prototype.arrow=function(e,t,i,n,o){var r=i-e,a=n-t,s=Math.sqrt(r*r+a*a),c=a/s,l=r/s,d=[];d.push(0,0);for(var h=0;h<o.length;h+=2){var u=o[h],p=o[h+1];d.push(u<0?s+u:u,p)}for(d.push(s,0),h=o.length;h>0;h-=2)u=o[h-2],p=o[h-1],d.push(u<0?s+u:u,-p);for(d.push(0,0),h=0;h<d.length;h+=2)u=d[h]*l-d[h+1]*c+e,p=d[h]*c+d[h+1]*l+t,0===h?this.moveTo(u,p):this.lineTo(u,p)},i.prototype.roundRect=function(e,t,i,n,o){o={tl:o,tr:o,br:o,bl:o},this.beginPath(),this.moveTo(e+o.tl,t),this.lineTo(e+i-o.tr,t),this.quadraticCurveTo(e+i,t,e+i,t+o.tr),this.lineTo(e+i,t+n-o.br),this.quadraticCurveTo(e+i,t+n,e+i-o.br,t+n),this.lineTo(e+o.bl,t+n),this.quadraticCurveTo(e,t+n,e,t+n-o.bl),this.lineTo(e,t+o.tl),this.quadraticCurveTo(e,t,e+o.tl,t),this.closePath()})}]);