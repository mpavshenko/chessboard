"use strict";function board(e){function i(){for(var e=0;e<a.SQUARES.length;e++){var i=a.SQUARES[e],t=a.get(i);if(t){var n=$("#"+i);console.log(e+" "+i+" "+t.type),n.append($('<div id="'+i+'" class="piece"></div>').width(d).height(d).css("background-image","url(img/pieces/"+t.type+t.color+".svg)"))}}}var a=new Chess;a.reset();var t=$(e),n=$(document).width(),r=$(document).height(),d=Math.floor((Math.min(n,r)-40)/8.6),c=.3*d,o=8*d+4,s=o+2*c;t.width(s).height(s);for(var l=$('<div class="gameField"/>').height(o).width(o),p=[],h=0;h<a.SQUARES.length;h++){var v=a.SQUARES[h],g=a.square_color(v),u=a.get(v),m=$('<div id="'+v+'" class="cell"></div>').width(d).height(d);l.append(m.addClass(g)),u&&m.append($('<div id="'+v+'" class="piece"></div>').width(d).height(d).css("background-image","url(img/pieces/"+u.type+u.color+".svg)")),p.push(m[0])}for(var b=$("<div>").css("margin-left",c+"px"),f=["A","B","C","D","E","F","G","H"],h=0;h<8;h++){var w=$('<div class="alphabetLetter">'+f[h]+"</div>").width(d).height(c).css("line-height",c+"px").css("font-size",.2*d+"px");b.append(w)}for(var S=$('<div class="numericLetterPanel"/>').width(c),h=8;h>0;h--){var x=$('<div class="numericLetter">'+h+"</div>").css("line-height",d+"px").css("font-size",.2*d+"px");S.append(x)}t.append(b),t.append($("<div/>").append(S).append(l).append(S.clone())),t.append(b.clone()),dragula(p,{revertOnSpill:!0,removeOnSpill:!0,accepts:function(e,i,a,t){return setTimeout(function(){if($(e).hasClass("gu-transit"))$($(e).detach().prependTo($(i)));else{var a=$(e).attr("id");$(e).parent().children().not("[id='"+a+"']").remove()}}),!0}});var k={};return k.clear=function(){a.clear(),$(".piece").remove()},k.initial=function(){k.clear(),a.reset(),i()},k.sizePx=s,k}var board=board("#board-container");$("#clear-btn").click(board.clear),$("#initial-btn").click(board.initial),$("#download-image-btn").click(function(e){console.log(board.sizePx),html2canvas($("#board-container"),{onrendered:function(e){document.body.appendChild(e);var i=document.createElement("a"),a=e.toDataURL("image/png");a=a.replace("image/png","image/octet-stream"),document.body.removeChild(e),i.download="board.png",i.href=a,i.click()},width:board.sizePx,height:board.sizePx})});
//# sourceMappingURL=app.js.map
